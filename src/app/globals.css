/* =========================================
   Tailwind + Theme Tokens
   ========================================= */
@import "tailwindcss";
@import "tailwindcss/theme" layer(theme);
@import "tailwindcss/preflight" layer(base);
@import "tailwindcss/utilities" layer(utilities);

/* -----------------------------------------
   Design Tokens (semantic, single source)
   ----------------------------------------- */
@theme {
  /* Surfaces */
  --color-bg: #121212; /* Page background */
  --color-surface: #1e1e1e; /* Cards, panels */
  --color-surface-alt: #26211b; /* Surface with a warm hint */

  /* Text */
  --color-text: #e8e8e8;
  --color-text-muted: #a0a0a0;
  --color-text-inverse: #121212;

  /* Borders */
  --color-border: #3a3a3a;

  /* Brand */
  --color-primary: #006400;
  --color-primary-hover: #005100;
  --color-primary-subtle: #2a7a2a;

  /* Secondary / Accent */
  --color-secondary: #b22222;
  --color-secondary-hover: #8e1b1b;
  --color-secondary-subtle: #d24545;

  --color-accent: #8b4513;
  --color-accent-subtle: #a56233;

  /* Utility / Status */
  --color-neutral-soft: #c2b280;
  --color-success: #006400;
  --color-danger: #ff0000;
  --color-warning: #c2b280;
}

/* CSS variables for easy use in arbitrary values */
:root {
  --bg-main: var(--color-bg);
  --bg-secondary: var(--color-surface);
  --bg-tertiary: var(--color-surface-alt);

  --text-main: var(--color-text);
  --text-muted: var(--color-text-muted);
  --text-inverse: var(--color-text-inverse);

  --border: var(--color-border);

  --primary: var(--color-primary);
  --primary-hover: var(--color-primary-hover);
  --primary-subtle: var(--color-primary-subtle);

  --secondary: var(--color-secondary);
  --secondary-hover: var(--color-secondary-hover);
  --secondary-subtle: var(--color-secondary-subtle);

  --accent: var(--color-accent);
  --accent-subtle: var(--color-accent-subtle);

  --neutral-soft: var(--color-neutral-soft);

  --success: var(--color-success);
  --danger: var(--color-danger);
  --warning: var(--color-warning);

  /* Focus ring defaults */
  --ring-color: var(--primary-subtle);
  --ring-offset-bg: var(--bg-secondary);
}

/* =========================================
   Base (type, layout)
   ========================================= */
@layer base {
  html,
  body {
    @apply h-full;
  }

  body {
    @apply antialiased mx-auto max-w-screen;
    background-color: var(--bg-main);
    color: var(--text-main);
  }

  main {
    /* Page content wrapper. Width consistent across app. */
    @apply mx-auto max-w-4xl px-6 py-10 space-y-8;
    min-height: calc(100vh - 60px);
  }

  /* Headings â€“ consistent weight/size; avoid surprise margins */
  h1 {
    @apply text-3xl font-semibold;
  }
  h2 {
    @apply text-2xl font-semibold;
  }
  h3 {
    @apply text-xl font-semibold;
  }
  h4 {
    @apply text-lg font-semibold;
  }
}

/* =========================================
   Components (non-breaking selectors)
   ========================================= */
@layer components {
  /* Buttons
     Keep existing selectors; internally use consistent rules.
  */
  button.primary {
    @apply rounded-lg border border-transparent px-4 py-2 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:cursor-pointer;
    background-color: var(--primary);
    color: var(--text-main);
  }
  button.primary:hover {
    background-color: var(--primary-hover);
  }
  button.primary:focus-visible {
    @apply outline-none ring-2 ring-offset-2;
    --tw-ring-color: var(--ring-color);
    --tw-ring-offset-color: var(--ring-offset-bg);
  }

  button.danger {
    @apply rounded-lg px-4 py-2 font-medium transition-colors hover:cursor-pointer;
    border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
    background-color: var(--bg-secondary);
    color: var(--text-main);
  }
  button.danger:hover {
    border-color: var(--danger);
    color: var(--danger);
  }
  button.danger:focus-visible {
    @apply outline-none ring-2;
    --tw-ring-color: var(--danger);
  }

  /* Text Inputs */
  input.text,
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="search"],
  input[type="number"],
  select {
    @apply rounded-lg p-2 outline-none transition-shadow;
    border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
    background-color: var(--bg-secondary);
    color: var(--text-main);
  }
  input.text::placeholder,
  input[type="text"]::placeholder,
  input[type="email"]::placeholder,
  input[type="tel"]::placeholder,
  input[type="search"]::placeholder,
  input[type="number"]::placeholder {
    color: var(--text-muted);
  }
  input.text:focus-visible,
  input[type="text"]:focus-visible,
  input[type="email"]:focus-visible,
  input[type="tel"]:focus-visible,
  input[type="search"]:focus-visible,
  input[type="number"]:focus-visible,
  select:focus-visible {
    @apply ring-2;
    --tw-ring-color: var(--primary-subtle);
  }

  /* Textareas */
  textarea {
    @apply rounded-lg p-2 outline-none transition-shadow resize-y;
    border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
    background-color: var(--bg-secondary);
    color: var(--text-main);
  }
  textarea::placeholder {
    color: var(--text-muted);
  }
  textarea:focus-visible {
    @apply ring-2;
    --tw-ring-color: var(--primary-subtle);
  }

  /* Cards / Sections (non-breaking: keep <section> styles) */
  section {
    @apply rounded-xl p-6 shadow-sm;
    border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
    background-color: var(--bg-secondary);
  }

  section > header {
    @apply mb-6 text-center;
  }

  section > header > h2 {
    @apply text-2xl font-semibold;
    color: var(--text-main);
  }

  /* Small decorative underline (fixed class name) */
  .section-underline {
    @apply mx-auto mt-2 h-1 w-16 rounded;
    background-color: var(--secondary);
  }

  /* Links */
  a.big-primary {
    @apply inline-block rounded-lg px-4 py-2 font-medium transition-colors;
    background-color: var(--primary);
    color: var(--text-main);
  }
  a.big-primary:hover {
    background-color: var(--primary-hover);
  }
  a.big-primary:focus-visible {
    @apply outline-none ring-2 ring-offset-2;
    --tw-ring-color: var(--primary-subtle);
    --tw-ring-offset-color: var(--bg-secondary);
  }

  /* Tables (used in bookings list) */
  .table {
    @apply w-full text-sm;
  }
  .table thead {
    background-color: var(--bg-tertiary);
  }
  .table th,
  .table td {
    @apply px-4 py-3 text-left align-top;
  }
  .table tbody tr:not(:last-child) {
    border-bottom: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
  }

  /* Subtle helper text */
  .muted {
    color: var(--text-muted);
  }

  .site-header {
    @apply sticky top-0 z-50 border-b;
    background-color: var(--bg-secondary);
    border-color: color-mix(in oklab, var(--border) 60%, transparent);
  }

  .site-header__inner {
    @apply mx-auto flex max-w-6xl items-center justify-between px-6 py-4;
  }

  .site-brand {
    @apply text-xl font-bold leading-none;
    color: var(--text-main);
  }

  .site-brand__link {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    --tw-ring-color: var(--ring-color);
    --tw-ring-offset-color: var(--bg-secondary);
  }

  .primary-nav {
    @apply flex items-center;
  }
  .primary-nav__list {
    @apply flex items-center gap-2;
  }
  .primary-nav__item {
    /* no special rules yet; reserved for future */
  }

  /* Accessible skip link that appears only when focused */
  .skip-link {
    @apply sr-only focus:not-sr-only absolute left-4 top-2 rounded-md px-3 py-2 text-sm;
    background-color: var(--primary);
    color: var(--text-main);
  }

  /* -----------------------------------------
     Navigation link (used by <NavigationLink/>)
     ----------------------------------------- */
  .nav-link {
    @apply relative rounded-md px-2 py-1 transition-colors outline-none;

    /* Base text color and hover treatment */
    color: var(--text-muted);
  }
  .nav-link:hover {
    color: var(--text-main);
  }

  /* Underline rail */
  .nav-link::after {
    content: "";
    @apply absolute left-0 right-0 -bottom-1 h-[2px] transition-transform;
    transform: scaleX(0);
    background-color: var(--secondary-subtle);
  }

  /* Focus ring */
  .nav-link:focus-visible {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--ring-color);
    --tw-ring-offset-color: var(--bg-secondary);
  }

  /* Hover shows the underline animation */
  .nav-link:hover::after {
    transform: scaleX(1);
  }

  /* Active state driven by data attribute */
  .nav-link[data-active="true"] {
    color: var(--text-main);
  }
  .nav-link[data-active="true"]::after {
    transform: scaleX(1);
    background-color: var(--secondary);
  }
}

/* =========================================
   New semantic classnames (coexist with legacy)
   ========================================= */
@layer components {
  /* Base button */
  .button,
  button.primary,
  button.danger {
    @apply rounded-lg px-4 py-2 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:cursor-pointer;
    border: 1px solid var(--color-border);
  }

  /* Primary button */
  .button-primary,
  button.primary {
    background-color: var(--primary);
    color: var(--text-main);
  }
  .button-primary:hover,
  button.primary:hover {
    background-color: var(--primary-hover);
  }
  .button-primary:focus-visible,
  button.primary:focus-visible {
    @apply outline-none ring-2 ring-offset-2;
    --tw-ring-color: var(--ring-color);
    --tw-ring-offset-color: var(--ring-offset-bg);
  }

  /* Danger button */
  .button-danger,
  button.danger {
    background-color: var(--bg-secondary);
    color: var(--text-main);
    border-color: color-mix(in oklab, var(--border) 60%, transparent);
  }
  .button-danger:hover,
  button.danger:hover {
    border-color: var(--danger);
    color: var(--danger);
  }
  .button-danger:focus-visible,
  button.danger:focus-visible {
    @apply outline-none ring-2;
    --tw-ring-color: var(--danger);
  }

  /* Input fields */
  .input-field,
  input.text,
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="search"],
  input[type="number"],
  select {
    @apply rounded-lg p-2 outline-none transition-shadow;
    border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
    background-color: var(--bg-secondary);
    color: var(--text-main);
  }
  .input-field::placeholder,
  input.text::placeholder,
  input[type="text"]::placeholder,
  input[type="email"]::placeholder,
  input[type="tel"]::placeholder,
  input[type="search"]::placeholder,
  input[type="number"]::placeholder {
    color: var(--text-muted);
  }
  .input-field:focus-visible,
  input.text:focus-visible,
  input[type="text"]:focus-visible,
  input[type="email"]:focus-visible,
  input[type="tel"]:focus-visible,
  input[type="search"]:focus-visible,
  input[type="number"]:focus-visible,
  select:focus-visible {
    @apply ring-2;
    --tw-ring-color: var(--primary-subtle);
  }

  /* Cards / panels */
  .card,
  section {
    @apply rounded-xl p-6 shadow-sm;
    border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
    background-color: var(--bg-secondary);
  }

  /* Tables */
  .table {
    @apply w-full text-sm;
  }
  .table thead {
    background-color: var(--bg-tertiary);
  }
  .table th,
  .table td {
    @apply px-4 py-3 text-left align-top;
  }
  .table tbody tr:not(:last-child) {
    border-bottom: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
  }
}

/* =========================================
   Utilities (tiny extras you might reuse)
   ========================================= */
@layer utilities {
  .bg-surface {
    background-color: var(--bg-secondary);
  }
  .bg-surface-alt {
    background-color: var(--bg-tertiary);
  }
  .text-muted {
    color: var(--text-muted);
  }
  .border-subtle {
    border-color: color-mix(in oklab, var(--border) 60%, transparent);
  }
}
